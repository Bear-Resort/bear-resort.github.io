---
title: "Letter of Recommendation Simulation!"
title-chn: "推荐信模拟器"
---

<style>
.container {
    margin: 40px auto;
    max-width: 500px;
}
.card-wrapper {
    position: relative;
    width: 320px;
    margin: 30px auto 10px;
    height: 200px;
    perspective: 600px;
    user-select: none;
}
.card {
    width: 100%;
    height: 100%;
    border-radius: 18px;
    box-shadow: 0 7px 21px rgba(0,0,0,0.14);
    border: 6px solid #43d678;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}
.card.inactive { cursor: default; }
.card.shake {
    animation: shake-card 0.2s linear 2;
}
@keyframes shake-card {
    0% { transform: translateX(-3px) scale(1);}
    25% { transform: translateX(2px) scale(0.99);}
    50% { transform: translateX(-5px) scale(1.02);}
    75% { transform: translateX(4px);}
    100%{transform: none;}
}
@keyframes draw-in {
    from { opacity:0; transform:translateY(70px) scale(0.93);}
    to { opacity: 1; transform: none;}
}
/* Quality theme gradients */
.card.quality-negative {
    border-color: #60646b;
    background: linear-gradient(135deg,#e2e5e9 0%,#b2b4b9 100%);
}
.card.quality-common {
    border-color: #43d678;
    background: linear-gradient(135deg,#e0fff2 0%,#43d678 100%);
}
.card.quality-rare {
    border-color: #3293fa;
    background: linear-gradient(135deg,#e7efff 0%,#3293fa 85%);
}
.card.quality-epic {
    border-color: #B56AFB;
    background: linear-gradient(135deg,#f4e7ff 5%,#B56AFB 92%);
}
.card.quality-legend {
    border-color: #FF3C3C;
    background: linear-gradient(135deg,#FFF1F1 5%,#FF3C3C 95%);
}
/* Card glowing upgrade */
.card.upgrade-glow {
    box-shadow: 0 0 60px 20px #ffe2b7, 0 0 13px 0 #fff;
    animation: glow-upgrade 0.7s cubic-bezier(.44,1.45,.47,1.67);
}
@keyframes glow-upgrade {
    0% { box-shadow: 0 0 30px 8px #ffe78f;}
    40% { box-shadow: 0 0 60px 22px #ffe2b7;}
    100% { box-shadow: 0 0 6px 2px #fff;}
}

.card-content {
    z-index: 4;
    color: #fff;
    font-size: 30px;
    font-weight: bold;
    letter-spacing: 0.16em;
    text-shadow: 0 1px 4px rgba(0,0,0,0.18);
    width: 100%;
    text-align: center;
    margin-top: 20px;
/*    font-family: 'Cinzel', serif;*/
    transition: color 0.4s;
}
.quality-label {
    font-size: 30px;
    font-weight: 900;
    letter-spacing: 0.19em;
    margin-top: 16px;
    position: relative;
    text-shadow: 0 2px 8px #1e1919, 0 2px 6px #fff9;
/*    font-family: 'Cinzel', serif;*/
    user-select:none;
    width:100%;
    border-radius: 6px;
    padding: 2px 0;
    transition: color 0.4s, text-shadow 0.5s, background 0.5s;
}

.quality-label.negative {
    background: none !important;
    color: #23282c !important;
    text-shadow: 0 2px 9px #fafbfc, 0 0 3px #50474a;
    font-weight: 900;
    letter-spacing: 0.18em;
}
.quality-label.common {
    background: linear-gradient(90deg,#0b6c40 30%,#168d4d 80%);
    -webkit-background-clip:text; color:transparent;}
.quality-label.rare {
    background: linear-gradient(90deg,#204b7b 10%,#1f57a2 80%);
    -webkit-background-clip:text; color:transparent;}
.quality-label.epic {
    background: linear-gradient(90deg,#4d2796 10%,#7d29be 80%);
    -webkit-background-clip:text; color:transparent;}
.quality-label.legend {
    background: linear-gradient(90deg,#930c15 10%,#d42b1f 80%);
    -webkit-background-clip:text; color:transparent;}
/* Cover from bottom to top */
.cover {
    position: absolute;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background: linear-gradient(180deg,#f7f7fa 76%, #c8cccb 100%);
    border-radius: 18px;
    box-shadow: 0 0 6px rgba(100,100,100,0.09);
    z-index:8;
    transition: clip-path 0.7s cubic-bezier(.32,1.4,.5,0.91), opacity 0.4s;
    will-change: clip-path,opacity;
    opacity:1;
    pointer-events: none;
    clip-path: polygon(0 100%, 100% 100%, 100% 0, 0 0); /* Fully covered */
}
.card.polished-0 .cover { clip-path: polygon(0 100%, 100% 100%, 100% 0%, 0 0%); }      /* Show everything */
.card.polished-1 .cover { clip-path: polygon(0 100%, 100% 100%, 100% 25%, 0 25%); }   /* Show bottom 75% */
.card.polished-2 .cover { clip-path: polygon(0 100%, 100% 100%, 100% 50%, 0 50%); }   /* Show bottom 50% */
.card.polished-3 .cover { clip-path: polygon(0 100%, 100% 100%, 100% 75%, 0 75%); }   /* Show bottom 25% */
.card.polished-4 .cover,
.card.finalize .cover { opacity: 0; }
/* No need to change the rest of your CSS here */
.hammer {
    position: absolute;
    left: 110px; top: 25px;
    width: 65px; height: 65px;
    opacity: 0;
    z-index: 20;
    pointer-events: none;
    animation: none;
}
.hammer.visible {
    opacity: 1;
    animation: hammer-swing 0.68s cubic-bezier(.44,1.45,.47,1.67);
}
@keyframes hammer-swing {
    0% { transform: rotate(-40deg) scale(1.03) translateY(-6px);}
    13% { transform: rotate(-5deg) scale(1.11);}
    30% { transform: rotate(-65deg) scale(0.96);}
    53% { transform: rotate(-30deg) scale(1.13);}
    89% { transform: rotate(-15deg) scale(1);}
    100% { transform: rotate(-38deg) scale(1) translateY(-6px);}
}
.polish-indicators {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 19px;
    min-height: 52px;
}
.circle {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.09);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size:18px;
    color: #fff;
    opacity: 1;
    transition: background 0.3s, border 0.3s, opacity 0.3s;
    border:4px solid #f1f2fc;
    user-select:none;
}
.circle.gold {
    background: radial-gradient(circle at 30% 20%, #ffeec2 80%, #ffd22f 100%);
    border-color: #ffe054;
}
.circle.gray {
    background: linear-gradient(135deg,#d4d4d4 0%,#a0a0a0 80%);
    border-color: #ebebeb;
    color: #909090;
    opacity: 0.43;
}
.actions {
    margin-top: 22px;
}
button {
    display: inline-block;
    background: #B56AFB;
    color: #fff;
    padding: 11px 18px;
    border:none;
    border-radius: 8px;
    font-size: 18px;
    font-weight: bold;
    box-shadow: 0 2px 7px rgba(50,147,250,0.12);
    margin: 0 8px;
    cursor: pointer;
    transition: background 0.23s, box-shadow 0.16s;
}
button:disabled {
    background: #a5bbcd;
    color: #eee;
    cursor: not-allowed;
}
button.giveup {
    background: #FF3C3C;
}
.hand-hint {
    position: absolute;
    left: 50%;
    top: 22px;
    transform: translateX(-50%);
    z-index:99;
    pointer-events:none;
    display: flex;
    flex-direction:column;
    align-items:center;
    animation: fade-in-hand 0.4s;
    width:90px;
}
@keyframes fade-in-hand {
    0% {opacity:0; transform:translateX(-50%) scale(0.85);}
    60%{opacity:1;}
    100%{opacity:1; transform:translateX(-50%) scale(1);}
}
.hand-click-anim {
    animation: hand-click 1s linear forwards;
}
@keyframes hand-click {
    0% {transform:translateX(-50%) scale(1);}
    12%{ transform: translate(-50%,30px) scale(0.96);}
    22%{ transform: translate(-50%,18px) scale(1);}
    33%{ transform: translate(-50%,0px) scale(1);}
    100%{transform:translateX(-50%) scale(1);}
}
.hand-text {
    padding-top: 2px;
    font-family: 'Cinzel', serif;
    color: #ffd22f;
    font-weight: 700;
    font-size: 20px;
    text-shadow: 0 2px 8px #fff, 0 1px 2px #888;
    letter-spacing: 0.03em;
    animation: fade-in-label 1.2s;
}
@keyframes fade-in-label {
    0% { opacity: 0;}
    30%{opacity:1;}
    100%{opacity:1;}
}
.result-msg {
    font-size: 22px;
    margin-top: 32px;
    color: #246;
    font-weight: 600;
    letter-spacing: 0.05em;
}
</style>
<div class="container" style="text-align: center;">
    <h1>Letter of Recommendation Simulator</h1>
    <div class="actions">
        <button id="drawBtn">Draw Letter</button>
        <button id="giveUpBtn" class="giveup" style="display:none;">Give Up</button>
    </div>
    <div class="card-wrapper"></div>
    <br><br>
    <div class="polish-indicators" id="polishIndicators"></div>
    <div class="result-msg" id="resultMsg"></div>
</div>
<script>
const UPGRADE_CHANCE = 0.45; 
const DOWNGRADE_CHANCE = 0.08; 
const DOUBLE_UPGRADE_CHANCE = 0.09; 

const TIERS = ['negative', 'common', 'rare', 'epic', 'legend'];
const TIER_LABELS = {
    negative: 'Negative',
    common: 'Common',
    rare: 'Rare',
    epic: 'Epic',
    legend: 'Legend'
};

const TIER_COLORS = {
    negative: '#60646b',
    common: '#168d4d',
    rare: '#1f57a2',
    epic: '#7d29be',
    legend: '#d42b1f'
};

let gameState = null;
let lastTouchOrClickTime = Date.now();
let handHintTimeout = null;
let handHintRemoveTimeout = null;

const HAMMER_SVG = `
<svg class="hammer-svg" viewBox="0 0 64 64">
<ellipse cx="20" cy="44" rx="6" ry="17" fill="#333"/>
<rect x="36" y="13" width="16" height="19" rx="5" fill="#dedede" stroke="#aaa" stroke-width="2"/>
<rect x="27" y="33" width="23" height="7.5" rx="2" fill="#979797"/>
<rect x="13" y="38" width="19" height="8.5" rx="7" fill="#9c601c"/>
<ellipse cx="31" cy="47" rx="8" ry="5" fill="#d9a371"/>
</svg>
`;
const HAND_SVG = `
<svg width="62" height="62" viewBox="0 0 62 62" fill="none">
  <ellipse cx="32" cy="47" rx="23" ry="13" fill="#f3e2cc"/>
  <rect x="19" y="28" width="28" height="28" rx="12" fill="#fcf8f4"/>
  <rect x="18" y="18" width="13" height="34" rx="6.5" fill="#ffd780" stroke="#e5bb61" stroke-width="2"/>
  <rect x="28" y="18" width="13" height="34" rx="6.5" fill="#ffd780" stroke="#e5bb61" stroke-width="2"/>
  <rect x="38" y="20" width="8" height="23" rx="4" fill="#ffd780" stroke="#e5bb61" stroke-width="2"/>
  <circle cx="25" cy="15" r="7" fill="#f7e5b7" stroke="#e8b672" stroke-width="2"/>
</svg>
`;

function createCard() {
    const card = document.createElement('div');
    card.className = 'card quality-common polished-0';
    card.innerHTML = `
        <div class="hammer">${HAMMER_SVG}</div>
        <div class="card-content">LETTER OF</div>
        <div class="card-content" style="margin-top:2px;">REC</div>
        <div class="quality-label common">Common</div>
        <div class="cover"></div>
    `;
    return card;
}

function updateCardVisuals(card, tier, polishCount, finalReveal = false) {
    for (const t of TIERS) card.classList.remove(`quality-${t}`);
    card.classList.add(`quality-${tier}`);
    for (let pc=0;pc<=4;++pc) card.classList.remove(`polished-${pc}`);
    if (finalReveal) {
        card.classList.add('finalize');
    } else {
        card.classList.remove('finalize');
        card.classList.add(`polished-${polishCount}`);
    }
    const qLabel = card.querySelector('.quality-label');
    qLabel.className = `quality-label ${tier}`;
    qLabel.textContent = TIER_LABELS[tier];
    if (tier === 'negative' || tier==='legend') card.classList.add('inactive');
    else card.classList.remove('inactive');
}

function showHammer(card) {
    const hammer = card.querySelector('.hammer');
    hammer.classList.add('visible');
    setTimeout(()=>hammer.classList.remove('visible'), 650);
}

function showHandHint(card) {
    if (!gameState || gameState.finished || gameState.tier==='negative' || gameState.tier==='legend') return;
    if (card.querySelector('.hand-hint')) return;
    const hand = document.createElement('div');
    hand.className = 'hand-hint hand-click-anim';
    hand.innerHTML = HAND_SVG + `<div class="hand-text">Click to polish</div>`;
    card.appendChild(hand);
    handHintRemoveTimeout = setTimeout(()=>{
        if (hand.parentNode) hand.parentNode.removeChild(hand);
    },3000);
}

function removeHandHint(card) {
    if (!card) return;
    const hand = card.querySelector('.hand-hint');
    if (hand) hand.parentNode.removeChild(hand);
}

function updatePolishIndicators() {
    const wrap = document.getElementById('polishIndicators');
    wrap.innerHTML = '';
    if (!gameState) return;
    for(let i=0; i<gameState.maxPolishes; ++i) {
        let left = i>=gameState.polishCount && !gameState.finished && gameState.tier!=='negative' && gameState.tier!=='legend';
        let classes = "circle";
        if (left) classes += " gold";
        else classes += " gray";
        wrap.innerHTML += `<span class="${classes}"></span>`;
    }
}

function startGame() {
    gameState = {
        tier: 'common',
        polishCount: 0,
        maxPolishes: 4,
        finished: false
    };
    document.getElementById('resultMsg').textContent = '';
    document.getElementById('giveUpBtn').style.display='inline-block';
    document.getElementById('giveUpBtn').disabled = false;
    document.getElementById('drawBtn').style.display='none';
    const wrap = document.querySelector('.card-wrapper');
    wrap.innerHTML = '';
    clearHintTimers();
    const card = createCard();
    wrap.appendChild(card);
    updatePolishIndicators();
    card.addEventListener('click', cardPolishHandler);
    setTimeout(()=>{updateCardVisuals(card, gameState.tier, gameState.polishCount);},10);
    setTimeout(scheduleHandHint,11000); 
}
function cardPolishHandler(e) {
    if (!gameState || gameState.finished || gameState.tier==='negative' || gameState.tier==='legend') return;
    let card = document.querySelector('.card');
    if (card.classList.contains('inactive')) return;
    if (card.classList.contains('action-lock')) return;
    let tierIdx = TIERS.indexOf(gameState.tier);
    let roll = Math.random();
    let prevTierIdx = tierIdx;
    let upgraded = false, downgraded=false, legendReached = false;
    if (roll < DOWNGRADE_CHANCE) {
        tierIdx = 0;
        downgraded=true;
    }
    else if (roll < DOWNGRADE_CHANCE + DOUBLE_UPGRADE_CHANCE) {
        tierIdx = Math.min(tierIdx+2, TIERS.length-1);
        upgraded= tierIdx>prevTierIdx;
    }
    else if (roll < DOWNGRADE_CHANCE + DOUBLE_UPGRADE_CHANCE + UPGRADE_CHANCE) {
        tierIdx = Math.min(tierIdx+1, TIERS.length-1);
        upgraded=tierIdx>prevTierIdx;
    }
    if (upgraded) {
        card.classList.add('action-lock');
        showHammer(card);
        removeHandHint(card);
        setTimeout(()=>{
            gameState.tier = TIERS[tierIdx];
            gameState.polishCount += 1;
            updatePolishIndicators();
            updateCardVisuals(card, gameState.tier, gameState.polishCount);
            card.classList.add('upgrade-glow');
            setTimeout(()=>card.classList.remove('upgrade-glow'),560);
            if (gameState.tier==='legend') {
                updateCardVisuals(card, gameState.tier, gameState.polishCount, true);
                finishGame('You received a LEGEND tier letter! Strongest recommendation ever!', true);
                showDrawIfFinalized();
            } else if (gameState.polishCount >= gameState.maxPolishes) {
                updateCardVisuals(card, gameState.tier, gameState.polishCount, true);
                finishGame('You have used all changes to polish! Are you good with this?', true);
                showDrawIfFinalized();
            } else {
                document.getElementById('giveUpBtn').disabled = false;
            }
            card.classList.remove('action-lock');
        }, 600);
    }
    else if (downgraded || tierIdx===0) {
        card.classList.add('action-lock');
        showHammer(card);
        removeHandHint(card);
        setTimeout(()=>{
            gameState.tier = TIERS[tierIdx];
            gameState.polishCount += 1;
            updatePolishIndicators();
            card.classList.add('shake');
            setTimeout(()=>card.classList.remove('shake'),250);
            updateCardVisuals(card, gameState.tier, gameState.polishCount, true);
            finishGame('Bad history discovered! Cooked for this letter!', true);
            showDrawIfFinalized();
            card.classList.remove('action-lock');
        }, 600);
    }
    else {
        card.classList.add('action-lock');
        showHammer(card);
        removeHandHint(card);
        setTimeout(()=>{
            gameState.tier = TIERS[tierIdx];
            gameState.polishCount += 1;
            updatePolishIndicators();
            updateCardVisuals(card, gameState.tier, gameState.polishCount);
            if (gameState.tier==='legend') {
                updateCardVisuals(card, gameState.tier, gameState.polishCount, true);
                finishGame('You received a LEGEND tier letter! Principal writes you a glowing review!', true);
                showDrawIfFinalized();
            } else if (gameState.polishCount >= gameState.maxPolishes) {
                updateCardVisuals(card, gameState.tier, gameState.polishCount, true);
                finishGame('All polishes used!', true);
                showDrawIfFinalized();
            } else {
                document.getElementById('giveUpBtn').disabled = false;
            }
            card.classList.remove('action-lock');
        }, 700);
    }
    lastTouchOrClickTime = Date.now();
}
function finishGame(msg, finalReveal=false) {
    if (!gameState) return;
    gameState.finished = true;
    document.getElementById('giveUpBtn').disabled = true;
    document.getElementById('giveUpBtn').style.display='none';
    const result = `Result: <span style="color:${TIER_COLORS[gameState.tier]};font-weight:700;">${TIER_LABELS[gameState.tier]}</span><br>${msg||''}`;
    document.getElementById('resultMsg').innerHTML = result;
    updatePolishIndicators();
    clearHintTimers();
}
document.getElementById('drawBtn').addEventListener('click', ()=>{
    startGame();
});
document.getElementById('giveUpBtn').addEventListener('click', ()=>{
    if (!gameState || gameState.finished) return;
    let card = document.querySelector('.card');
    updateCardVisuals(card, gameState.tier, gameState.polishCount, true);
    finishGame("You gave up. Let's hope it's enough.", true);
    showDrawIfFinalized();
});
function showDrawIfFinalized() {
    if (gameState && (gameState.finished ||
        gameState.tier==='negative' ||
        gameState.tier==='legend' ||
        gameState.polishCount >= gameState.maxPolishes)) {
        document.getElementById('drawBtn').style.display = 'inline-block';
    }
}
function clearHintTimers() {
    if (handHintTimeout) {clearTimeout(handHintTimeout);handHintTimeout=null;}
    if (handHintRemoveTimeout) {clearTimeout(handHintRemoveTimeout);handHintRemoveTimeout=null;}
}
function scheduleHandHint() {
    if (!gameState || gameState.finished || gameState.tier==='negative' || gameState.tier==='legend') return;
    if (gameState.polishCount >= gameState.maxPolishes) return;
    if (Date.now()-lastTouchOrClickTime < 4000) {
        handHintTimeout = setTimeout(scheduleHandHint,10000);
        return;
    }
    let card = document.querySelector('.card');
    if (card) showHandHint(card);
    handHintTimeout = setTimeout(scheduleHandHint, 10000);
}
window.addEventListener('click',()=>{lastTouchOrClickTime=Date.now();removeHandHint(document.querySelector('.card'));});
window.addEventListener('touchstart',()=>{lastTouchOrClickTime=Date.now();removeHandHint(document.querySelector('.card'));});
document.getElementById('giveUpBtn').style.display='none';
document.getElementById('drawBtn').style.display='inline-block';
</script>